# AI Mentor - –ò—Ç–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ AI API

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `server/src/routes/aiMentor.js`**:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `AI_PROVIDER` (gemini/claude/openai)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
```javascript
callAIWithProvider()  // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
callClaudeAPI()       // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude API
callGeminiAPI()       // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Gemini API
callOpenAIAPI()       // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API
```

### 2. –°–∏—Å—Ç–µ–º–∞ —Å–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∫–æ–∏–Ω–æ–≤

**Backend (`server/src/routes/aiMentor.js`)**:
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`requireAuth` middleware)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ–¥–∫–æ–∏–Ω–æ–≤ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –°–ø–∏—Å—ã–≤–∞–µ—Ç 1 –º–µ–¥–∫–æ–∏–Ω –∑–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å –∫ –º–µ–Ω—Ç–æ—Ä—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –¥–ª—è Plus –ø–æ–¥–ø–∏—Å–∫–∏ (120/–¥–µ–Ω—å)
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –º–µ–¥–∫–æ–∏–Ω–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ —Å–ø–∏—Å–∞–Ω–∏—è

**Frontend (`src/components/AIMentor/MentorChat.js`)**:
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –º–µ–¥–∫–æ–∏–Ω–æ–≤
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –£–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ API endpoints (`/api/medcoins/spend`)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –º–µ–¥–∫–æ–∏–Ω–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è Plus –ø–æ–¥–ø–∏—Å–∫–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∫–æ–∏–Ω–æ–≤ –≤ –∫–µ–π—Å–∞—Ö

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

–í `src/components/CaseFlow/CaseFlow.js` (—Å—Ç—Ä–æ–∫–∏ 120-131):
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ 1 –º–µ–¥–∫–æ–∏–Ω–∞ –∑–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å –ø–∞—Ü–∏–µ–Ω—Ç—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤–æ–ø—Ä–æ—Å–∞
- ‚úÖ –ü–æ–∫–∞–∑ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –º–µ–¥–∫–æ–∏–Ω–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** - —Å–∏—Å—Ç–µ–º–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω RAG

**–°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç**: `RAG_ARCHITECTURE_PLAN.md`

**–í–∫–ª—é—á–∞–µ—Ç**:
- ‚úÖ –ü–æ–ª–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É RAG pipeline
- ‚úÖ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MedElement API
- ‚úÖ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ PubMed API
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—É –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –û—Ü–µ–Ω–∫—É —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ —ç—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã API –∫–ª—é—á–∏.

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints

#### POST `/api/ai-mentor/chat`
- **–¢—Ä–µ–±—É–µ—Ç**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Bearer token)
- **–°–ø–∏—Å—ã–≤–∞–µ—Ç**: 1 –º–µ–¥–∫–æ–∏–Ω
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  ```json
  {
    "question": "–ö–∞–∫ –ª–µ—á–∏—Ç—å –ø–Ω–µ–≤–º–æ–Ω–∏—é?",
    "mentorId": "practical"
  }
  ```
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
    "answer": "–û—Ç–≤–µ—Ç –º–µ–Ω—Ç–æ—Ä–∞...",
    "sources": [...],
    "medcoins": {
      "spent": 1,
      "balance": 99
    },
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
  ```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ–¥–∫–æ–∏–Ω–æ–≤**:
```json
{
  "error": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ–¥–∫–æ–∏–Ω–æ–≤",
  "balance": 0,
  "required": 1
}
```

**–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω** (–¥–ª—è Plus):
```json
{
  "error": "–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω",
  "dailyLimit": 120,
  "todayUsage": 120,
  "remaining": 0
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `AI_PROVIDER` - –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (gemini/claude/openai)
- `CLAUDE_API_KEY` - –¥–ª—è Claude API
- `GEMINI_API_KEY` - –¥–ª—è Gemini API
- `OPENAI_API_KEY` - –¥–ª—è OpenAI API

## üîÑ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

### AI Mentor –∑–∞–ø—Ä–æ—Å:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –≤ —á–∞—Ç–µ
   ‚Üì
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   ‚Üì
3. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   ‚Üì
4. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ–¥–∫–æ–∏–Ω–æ–≤
   ‚Üì
5. Backend —Å–ø–∏—Å—ã–≤–∞–µ—Ç 1 –º–µ–¥–∫–æ–∏–Ω
   ‚Üì
6. Backend –≤—ã–∑—ã–≤–∞–µ—Ç AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Gemini/Claude/OpenAI)
   ‚Üì
7. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –º–µ–Ω—Ç–æ—Ä–∞
   ‚Üì
8. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –±–∞–ª–∞–Ω—Å–æ–º
   ‚Üì
9. Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å
```

### –ö–µ–π—Å—ã (CaseFlow):

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–∞—Ü–∏–µ–Ω—Ç—É
   ‚Üì
2. Frontend —Å–ø–∏—Å—ã–≤–∞–µ—Ç 1 –º–µ–¥–∫–æ–∏–Ω —á–µ—Ä–µ–∑ /api/medcoins/spend
   ‚Üì
3. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å –≤ AI
   ‚Üì
4. –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –µ–≥–æ
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:

1. ‚úÖ AI Mentor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ AI API, —á—Ç–æ –∏ –ø–∞—Ü–∏–µ–Ω—Ç—ã
2. ‚úÖ –ú–µ–¥–∫–æ–∏–Ω—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ –º–µ–Ω—Ç–æ—Ä—É
3. ‚úÖ –ú–µ–¥–∫–æ–∏–Ω—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–æ–ø—Ä–æ—Å–µ –ø–∞—Ü–∏–µ–Ω—Ç—É (—É–∂–µ –±—ã–ª–æ)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –¥–Ω–µ–≤–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
5. ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
6. ‚úÖ –ì–æ—Ç–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ RAG

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é:

- ‚úÖ –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω RAG –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≥–æ—Ç–æ–≤
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å RAG pipeline –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MedElement –∏ PubMed API

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç API –∫–ª—é—á–∏)

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î (Pinecone/Weaviate)
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å embedding –º–æ–¥–µ–ª—å
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MedElement —Å–µ—Ä–≤–∏—Å
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PubMed —Å–µ—Ä–≤–∏—Å
5. –î–æ–±–∞–≤–∏—Ç—å RAG pipeline –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

**–í—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!** üéâ



