#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ MedPractice

echo "üöÄ –ù–∞—á–∞–ª–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞..."

# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
echo "üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã..."
apt update && apt upgrade -y

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18.x
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js..."
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
apt install -y nodejs

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:"
node --version
npm --version

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx..."
apt install -y nginx

# 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2..."
npm install -g pm2

# 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git..."
apt install -y git

# 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ç–∏–ª–∏—Ç..."
apt install -y curl wget

# 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
echo "üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall..."
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw --force enable

echo ""
echo "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: git clone <your-repo-url>"
echo "2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª—ã"
echo "3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: npm install"
echo "4. –°–æ–±—Ä–∞—Ç—å frontend: npm run build"
echo "5. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —á–µ—Ä–µ–∑ PM2: pm2 start server/src/index.js --name medpractice-api"

