# ะะตะทัะผะต ะธะฝัะตะณัะฐัะธะธ ั MedElement API

## โ ะงัะพ ะฑัะปะพ ัะดะตะปะฐะฝะพ

### 1. ะกะพะทะดะฐะฝ ัะตัะฒะธั ะธะฝัะตะณัะฐัะธะธ (`medelementService.js`)
   - โ ะะฐะณััะทะบะฐ ะฟัะพัะพะบะพะปะพะฒ ะปะตัะตะฝะธั ะธะท MedElement API
   - โ ะะพะปััะตะฝะธะต ะดะธะฐะณะฝะพััะธัะตัะบะธั ะบัะธัะตัะธะตะฒ
   - โ ะะฐะปะธะดะฐัะธั ะปะตัะตะฝะธั ะฝะฐ ัะพะพัะฒะตัััะฒะธะต ะฟัะพัะพะบะพะปะฐะผ
   - โ ะััะธัะพะฒะฐะฝะธะต ะฟัะพัะพะบะพะปะพะฒ (TTL 24 ัะฐัะฐ)
   - โ ะะฒัะพะผะฐัะธัะตัะบะธะน fallback ะฝะฐ ะปะพะบะฐะปัะฝัั ะฑะฐะทั

### 2. ะะฑะฝะพะฒะปะตะฝั ัััะตััะฒัััะธะต ัะตัะฒะธัั
   - โ `protocols.js` - ะดะพะฑะฐะฒะปะตะฝะฐ ะฟะพะดะดะตัะถะบะฐ ะฐัะธะฝััะพะฝะฝะพะน ะทะฐะณััะทะบะธ ะธะท API
   - โ `treatmentSimulationService.js` - ะธะฝัะตะณัะฐัะธั ะฒะฐะปะธะดะฐัะธะธ ัะตัะตะท MedElement
   - โ `evaluationService.js` - ะพะฑะฝะพะฒะปะตะฝ ะดะปั ัะฐะฑะพัั ั ะฐัะธะฝััะพะฝะฝัะผะธ ะฟัะพัะพะบะพะปะฐะผะธ

### 3. ะกะพััะฐะฝะตะฝะฐ ะพะฑัะฐัะฝะฐั ัะพะฒะผะตััะธะผะพััั
   - โ ะัะธะปะพะถะตะฝะธะต ัะฐะฑะพัะฐะตั ะฑะตะท API ะบะปััะฐ (ะธัะฟะพะปัะทัะตั ะปะพะบะฐะปัะฝัั ะฑะฐะทั)
   - โ ะกะธะฝััะพะฝะฝัะต ะฒะตััะธะธ ััะฝะบัะธะน ะดะปั ัััะตััะฒัััะตะณะพ ะบะพะดะฐ
   - โ ะะฒัะพะผะฐัะธัะตัะบะธะน fallback ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ API

### 4. ะะพะบัะผะตะฝัะฐัะธั
   - โ ะกะพะทะดะฐะฝ `MEDELEMENT_INTEGRATION.md` ั ะฟะพะดัะพะฑะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะตะน
   - โ ะะฑะฝะพะฒะปะตะฝ `README.md` ั ะธะฝัะพัะผะฐัะธะตะน ะพะฑ ะธะฝัะตะณัะฐัะธะธ

## ๐ฏ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### ะะฐะทะพะฒะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต (ะฑะตะท API ะบะปััะฐ)

ะัะธะปะพะถะตะฝะธะต ัะฐะฑะพัะฐะตั ะบะฐะบ ัะฐะฝััะต - ะธัะฟะพะปัะทัะตั ะปะพะบะฐะปัะฝัั ะฑะฐะทั ะฟัะพัะพะบะพะปะพะฒ.

### ะก MedElement API

1. ะะพะปััะธัะต API ะบะปัั ะพั MedElement
2. ะะพะฑะฐะฒััะต ะฒ `server/.env`:
   ```env
   USE_MEDELEMENT_API=true
   MEDELEMENT_API_KEY=your_key_here
   ```
3. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั

### ะงัะพ ะฟัะพะธััะพะดะธั ะฟัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ API

- ะัะพัะพะบะพะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะถะฐัััั ะธะท MedElement ะฟัะธ ะฟัะพะฒะตัะบะต ะปะตัะตะฝะธั
- ะะตะทัะปััะฐัั ะฒะฐะปะธะดะฐัะธะธ ัะพะดะตัะถะฐั ะดะฐะฝะฝัะต ะธะท API
- ะัะธ ะฝะตะดะพัััะฟะฝะพััะธ API ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตััั ะปะพะบะฐะปัะฝะฐั ะฑะฐะทะฐ
- ะัะพัะพะบะพะปั ะบััะธัััััั ะฝะฐ 24 ัะฐัะฐ

## ๐ ะกัััะบัััะฐ ะธะฝัะตะณัะฐัะธะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Case Flow (Frontend)  โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ treatmentSimulation     โ
โ   Service               โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโ
             โ
     โโโโโโโโโดโโโโโโโโ
     โ               โ
     โผ               โผ
โโโโโโโโโโโ   โโโโโโโโโโโโโโโโ
โprotocolsโ   โmedelement    โ
โ.js      โ   โService       โ
โ(local)  โ   โ(API)         โ
โโโโโโโโโโโ   โโโโโโโโโโโโโโโโ
```

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะััะธัะพะฒะฐะฝะธะต
- ะัะพัะพะบะพะปั ะบััะธัััััั ะฒ ะฟะฐะผััะธ (Map)
- TTL: 24 ัะฐัะฐ
- ะ ะฟัะพะดะฐะบัะตะฝะต ัะตะบะพะผะตะฝะดัะตััั Redis

### Fallback ะผะตัะฐะฝะธะทะผ
1. ะัะพะฒะตัะบะฐ ะบััะฐ
2. ะะฐะฟัะพั ะบ MedElement API
3. Fallback ะฝะฐ ะปะพะบะฐะปัะฝัั ะฑะฐะทั
4. ะกะพััะฐะฝะตะฝะธะต ะฒ ะบัั

### ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- ะัะต ะพัะธะฑะบะธ ะปะพะณะธัััััั
- ะกะธััะตะผะฐ ะฟัะพะดะพะปะถะฐะตั ัะฐะฑะพัะฐัั ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ API
- ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฒะธะดะธั ะพัะธะฑะพะบ - ัะฐะฑะพัะฐะตั fallback

## ๐ ะัะธะผะตัะฐะฝะธั

- **API ะบะปัั ะฝะต ะพะฑัะทะฐัะตะปะตะฝ** - ะฟัะธะปะพะถะตะฝะธะต ัะฐะฑะพัะฐะตั ะธ ะฑะตะท ะฝะตะณะพ
- **ะะฒัะพะผะฐัะธัะตัะบะธะน fallback** - ะฒัะตะณะดะฐ ะตััั ัะตะทะตัะฒะฝัะน ะฒะฐัะธะฐะฝั
- **ะััะธัะพะฒะฐะฝะธะต** - ัะผะตะฝััะฐะตั ะฝะฐะณััะทะบั ะฝะฐ API
- **ะะฐััะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ะผะพะดัะปะธ

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

1. ะะพะปััะธัั API ะบะปัั ะพั MedElement (ะตัะปะธ ะฝัะถะตะฝ)
2. ะะฐัััะพะธัั `.env` ัะฐะนะป
3. ะัะพัะตััะธัะพะฒะฐัั ัะฐะฑะพัั ั ัะตะฐะปัะฝัะผ API
4. ะัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฝะฐัััะพะธัั Redis ะดะปั ะบััะธัะพะฒะฐะฝะธั

---

**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั



